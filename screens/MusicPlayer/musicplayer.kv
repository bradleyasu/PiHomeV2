#:kivy 2.0.0
#:import Knob kivy.garden.knob.Knob
<MusicPlayerContainer>:
    size_hint: 1, 1
    pos_hint: {"center_x": .5, "center_y": .5}

    canvas: 
        Color:
            rgba: 0, 0, 0, 0.2
        Rectangle:
            size: self.size
            pos: self.pos

    Label:
        text: root.current_time
        font_size: '60sp'
        size_hint: 0.1, 0.1
        pos_hint: {"center_x": .21, "center_y": .5}
        color: 1, 1, 1, 1
        font_name: "Nunito"
        

<MusicPlayerCard>:
    size_hint: 0.5, 0.8
    pos_hint: {"center_x": .7, "center_y": .5}

    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.85
        BoxShadow:
            pos: self.pos
            size: self.size
            offset: 0, -10
            spread_radius: -20, -20
            border_radius: 10, 10, 10, 10
            blur_radius: 80
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [20, 20, 20, 20]


<Player>:
    canvas:
        Color:
            rgba: 1, 1, 1, 0
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10, 10, 10, 10]

    BoxLayout:
        
        orientation: "vertical"
        size_hint: 1, 1
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(10)

        FloatLayout:
            size_hint: 1, 1
            pos_hint: {"center_x": .5, "center_y": .5}

            VinylWidget:
                id: vinyl_widget
                xOffset: 2.35 + root.vinyl_offset
                yOffset: 0.81 
                size_hint: 1, 1
                pos_hint: {"center_x": .5, "center_y": .5}

            NetworkImage:
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.85
                    BoxShadow:
                        pos: self.pos
                        size: self.size
                        offset: 0, -5
                        spread_radius: -10, -10
                        border_radius: 10, 10, 10, 10
                        blur_radius: 20
                id: album_art
                url: root.album_art if root.album_art else "screens/MusicPlayer/default_album_art.png"
                pos_hint: {"center_x": (.5 + root.album_art_offset), "center_y": .5}
                size: dp(190), dp(190)
                k_ratio: False
                stretch: True

        GridLayout:
            rows: 2
            size_hint: 1, 1
            pos_hint: {"center_x": .5, "center_y": .5}
            padding: dp(10)
            spacing: dp(10)

            Label:
                id: song_title
                text: root.now_playing
                font_size: '24sp'
                color: 0, 0, 0, 1
                font_name: "Nunito"
                size_hint: 1, 1
                pos_hint: {"center_x": .5, "center_y": .5}

            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, 1
                spacing: dp(55)
                padding: dp(20)
                
                CircleButton:
                    text: "♪"
                    on_press: root.on_radio()
                    stroke_color: 0, 0, 0, 0
                    text_color: 0, 0, 0, 1
                    font_size: '42sp'
                    pos_hint: {"center_x": .5, "center_y": .5}
                    custom_font: 'ArialUnicode'


                Knob:
                    id: volume_slider
                    pos_hint: {"center_x": .5, "center_y": .5}
                    value: 100
                    min: 0
                    max:  1
                    step: 0.01
                    on_value: root.set_volume(self.value)
                    knobimg_source: 'libs/garden/garden.knob/img/knob_metal.png'
                    knobimg_bgcolor: 1, 1, 1, 1
                    markeroff_color: 0, 0, 0, 0
                    marker_color: 0.5, 0.8, 0.5, 1
                
                CircleButton:
                    text: "■"
                    on_press: root.stop()
                    stroke_color: 0, 0, 0, 0
                    text_color: 0, 0, 0, 1 if root.is_playing else 0.3
                    font_size: '42sp'
                    pos_hint: {"center_x": .5, "center_y": .5}
                    custom_font: 'ArialUnicode'



    CircleButton:
        id: save_button
        text: "❤️"
        stroke_color: 0, 0, 0, 0
        text_color: 0.8, 0.8, 0.8, 1
        font_size: '28sp'
        pos_hint: {"center_x": .95, "center_y": .95}
        custom_font: 'ArialUnicode'
        on_press: root.save_song()


<VinylWidget>:
    size_hint: 0.4, 0.5
    pos_hint: {"center_x": .22, "center_y": .5}
    canvas:
        Color:
            rgb: 0, 0, 0
        Rectangle:
            pos: self.pos
            size: self.size

<RadioDrawer>:
    size_hint: 1.0, 0.0
    pos_hint: {"center_x": .5, "center_y": 0.2} 
    canvas:
        Color:
            rgba: 0, 0, 0, 0.9
        Rectangle:
            size: self.size
            pos: self.pos
        
    Carousel:
        # canvas:
            # Color:
                # rgba: 0, 255, 0, 0.9
            # Rectangle:
                # size: self.size
                # pos: self.pos
        size_hint: 1, 1
        pos_hint: {"center_x": .5, "center_y": .5}
        id: radio_carousel
        direction: "right"
        loop: True

<RadioItem>:
    canvas:
        Color:
            rgba: 0, 0, 0, 0
        Rectangle:
            size: self.size
            pos: self.pos

    NetworkImage:
        url: root.thumbnail
        size_hint: 0.5, 1.0
        pos_hint: {"center_x": .5, "center_y": .5}
    
    Label:
        text: root.text
        font_size: '28sp'
        color: 1, 1, 1, 1
        font_name: "Nunito"